---
layout: single
title: "MLOps Overview"
date: 2025-01-11 14:14:00 +0000
categories: ai
tags: [tech, ai, machine-learning]
excerpt: "연구원이 작성한 학습 코드를 통해 프로덕션 환경에 배포하고, 적절한 Trigger에 따라 프로덕션에서 학습을 진행"
notion_id: 178eef64-a1ca-80eb-96d6-e14d691b64db
notion_url: https://www.notion.so/MLOps-Overview-178eef64a1ca80eb96d6e14d691b64db
---

# MLOps란?

- DevOps = Development(개발) + Operation(운영)
- ML + Dev + Ops

<!--more-->
- 머신러닝과 개발, 운영의 통합 = 머신러닝 시스템 + 자동화
- MLOps에서의 CI, CD, CT (Continuous Training)
### ML 시스템의 기술 부채 = MLOps가 대두되는 이유

- Google “Hidden Technical Debt in ML System”
- 머신러닝 시스템 중에서 ML Code는 극히 일부에 해당
- 기술 부채가 나오는 건 코드가 아닌 전체적인 시스템에서
### MLOPS의 생애 주기 (ML을 위한 데이터 과학 단계)

1. 지속적으로 들어오는 데이터를 수집
1. 데이터를 머신러닝 시스템에 사용할 수 있도록 준비
1. 데이터를 검사하고 분석하여 적절한 데이터 선별(EDA)
1. 라벨링
1. 검증
1. 모델 학습
1. 학습된 모델 평가
1. 모델 시스템이 배포될 수 있는지 검증
1. 모델 시스템을 프로덕션에 배포
# Google MLOps 살펴보기

## MLOps 수준 0: 수동 프로세스

- CI, CD 없음
## MLOps 수준 1: ML 파이프라인 자동화

### Overview

- 모델을 프로덕션에서 학습과 배포를 자동적으로 진행
- 연구원이 작성한 학습 코드를 통해 프로덕션 환경에 배포하고, 적절한 Trigger에 따라 프로덕션에서 학습을 진행
- 학습이 끝나면 모델을 자동으로 배포
- Feature Store를 통해 실제 데이터도 데이터 사이언티스트가 빠르게 접근하여 연구
- 수준 1의 목표는 ML 파이프라인을 자동화하여 모델을 지속적으로 학습시키는 것(CT)
- 이를 통해 모델 예측 서비스를 지속적으로 제공 가능
- 새 데이터를 사용하여 프로덕션 단계에서 모델을 재학습시키는 프로세스를 자동화
## 특성

## 추가 구성요소

### 데이터 및 모델 유효성 검사

ML 파이프라인을 프로덕션에 배포할 때는 ML 파이프라인 트리거 중 하나 이상이 자동으로 파이프라인을 실행함. 파이프라인은 새 실시간 데이터가 새 데이터로 학습된 새 모델 버전을 생성할 것으로 예상함. 따라서 프로덕션 파이프라인은 자동화된 데이터 검증 및 모델 검증 단계가 필요함

- 데이터 검증: 모델 학습 전에 모델을 재학습할지 또는 파이프라인 실행을 중지할지 결정하는 데 필요함. 파이프라인에서 다음을 식별하면 자동으로 수행됨
- 모델 검증: 새 데이터가 제공된 모델을 학습시킨 후에 발생함. 모델을 프로덕션으로 승격하기 전에 사용자가 모델을 평가하고 검증함.
### Feature Store

**최신 데이터가 들어오는 데이터 저장소. 데이터 과학자들이 오프라인 학습 환경과 프로덕션 학습 환경과의 괴리를 줄일 수 있음**

학습 및 제공을 위한 특성의 정의, 스토리지, 액세스를 표준화하는 중앙 집중식 저장소. 특성 값에 대한 높은 처리량 일괄 처리 및 짧은 지연 시간 실시간 제공을 위한 API를 제공해야 하며, 학습 및 제공 워크로드를 모두 지원해야 함

데이터 과학자가 다음을 수행하는 데 도움이 됨

- 동일하거나 유사한 특성 세트를 다시 만들지 않고 항목에 사용 가능한 특성 세트 탐색 및 재사용
- 특성 및 관련 메타데이터를 유지하여 정의가 다른 유사한 특성 사용 방지
- Feature Store에서 최신 특성 값 제공
- Feature Store를 실험, 지속적 학습, 온라인 서빙을 위한 데이터 소스로 사용하여 학습-서빙 편향 방지. 
### 메타데이터 관리

ML 파이프라인의 각 실행에 대한 정보는 데이터 및 아티팩트 계보, 재현성, 비교를 돕기 위해 기록되며, 오류와 이상을 디버깅하는 데도 도움이 됨.

파이프라인을 실행할 때마다 메타데이터 저장소는 다음과 같은 메타데이터 기록

- 실행된 파이프라인 및 구성요소 버전
- 시작 및 종료 날짜, 시간, 파이프라인이 각 단계를 완료하는 데 걸린 시간
- 파이프라인의 실행자
- 파이프라인에 전달된 매개변수 인수
- 준비된 데이터의 위치, 검증 이상, 계산된 통계, 카테고리형 특성에서 추출된 어휘와 같은 파이프라인의 각 단계에서 생성된 아티팩트에 대한 포인터. 중간 출력을 추적하면 이미 완료된 단계를 다시 실행하지 않고도 가장 최근 단게에서 파이프라인 재개 가능
- 이전에 학습된 모델에 대한 포인터(이전 모델 버전으로 롤백 또는 평가 측정 항목을 생성하는 경우)
- 학습 및 테스트 세트 모두에 대한 모델 평가 단계에서 생성된 모델 평가 측정항목
### ML 파이프라인 트리거

**단순 시간에 따라 트리거를 발생시켜 학습시킬 수 있고, 성능 감소를 트리거 삼아서 학습을 진행할 수 있음**

ML 프로덕션 파이프라인을 자동화하여 새로운 데이터로 모델을 재학습시킬 수 있음

- 요청 시: 파이프라인의 임시 수동 실행
- 일정 기준: 라벨이 지정된 새 데이터는 매일, 매주 또는 매월 ML 시스템에 시스템적으로 사용할 수 있음. 재학습 빈도는 데이터 패턴의 변경 빈도와 모델 재학습 비용에 따라 달라짐
# MLOps 수준 2: CI/CD 파이프라인 자동화

### CI

- 파이프라인을 프로덕션에 배포하는 것을 자동화
- 모델 파이프라인을 레포에 푸시하면, 단위 테스트와 파이프라인 구성요소 간의 통합을 테스트하는 과정을 거침
### CD

- 학습 코드 파이프라인을 컨테이너로 묶어, 이미지를 만드는 형태로 진행
- 배포에 대한 테스트

---

*Originally published in [Notion](https://www.notion.so/MLOps-Overview-178eef64a1ca80eb96d6e14d691b64db) on January 11, 2025*