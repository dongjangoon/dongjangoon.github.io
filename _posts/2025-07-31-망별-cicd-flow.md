---
categories: tech
date: 2025-07-31 10:00:00 +0000
excerpt: A[GitOps Repo Update<br/>업무망] --> B[ArgoCD Sync<br/>업무망]
layout: post
notion_id: 241eef64-a1ca-801b-9314-e0d12d508237
notion_url: https://www.notion.so/CI-CD-Flow-241eef64a1ca801b9314e0d12d508237
tags:
- tech
title: 망별 CI/CD Flow
---

```mermaid
graph TB

<!--more-->
    subgraph "업무망 배포 플로우"
        A[GitOps Repo Update<br/>업무망] --> B[ArgoCD Sync<br/>업무망]
        B --> C{Target Environment}
        C -->|Dev| D[Dev Cluster<br/>업무망]
        C -->|Test| E[Test Cluster<br/>업무망]
        C -->|Staging| F[Staging Cluster<br/>업무망]
    end
    
    subgraph "망분리 동기화"
        G[GitOps Manifest<br/>동기화] --> H[보안 검증]
        H --> I[인터넷망 전송]
    end
    
    subgraph "인터넷망 배포 플로우"
        J[GitOps Repo<br/>인터넷망] --> K[ArgoCD Sync<br/>인터넷망]
        K --> L[Production Cluster<br/>인터넷망]
    end
    
    A -.->|단방향 동기화| G
    I -.-> J
```

```mermaid
flowchart TD
    A[장애 감지] --> B{장애 위치}
    
    B -->|업무망| C[업무망 ArgoCD 롤백]
    B -->|인터넷망| D[인터넷망 ArgoCD 롤백]
    B -->|동기화 실패| E[수동 개입 필요]
    
    C --> F[업무망 클러스터 복구]
    D --> G[Production 복구]
    E --> H[보안팀 + DevOps 협업]
    
    F --> I{복구 확인}
    G --> J{복구 확인}
    H --> K[수동 동기화 실행]
    
    I -->|성공| L[업무망 복구 완료]
    I -->|실패| M[수동 개입]
    J -->|성공| N[인터넷망 복구 완료]
    J -->|실패| O[긴급 대응팀 소집]
    
    K --> P[동기화 상태 확인]
    P --> Q{동기화 성공?}
    Q -->|성공| R[전체 복구 완료]
    Q -->|실패| S[망분리 구간 점검]
```

```mermaid
graph TB
    subgraph "ArgoCD Projects"
        INFRA[Infrastructure Project]
        DEV[Development Project]
        STAGING[Staging Project]
        PROD[Production Project]
    end
    
    subgraph "Git Repositories"
        INFRA_REPO[infrastructure-configs]
        APP_REPO[app-configs]
        HELM_REPO[helm-charts]
    end
    
    subgraph "Kubernetes Clusters"
        DEV_CLUSTER[Dev Cluster]
        STAGING_CLUSTER[Staging Cluster]
        PROD_CLUSTER[Production Cluster]
    end
    
    INFRA --> INFRA_REPO
    DEV --> APP_REPO
    STAGING --> APP_REPO
    PROD --> APP_REPO
    
    DEV --> DEV_CLUSTER
    STAGING --> STAGING_CLUSTER
    PROD --> PROD_CLUSTER
```

```mermaid
graph TB
    subgraph "현재 (모노레포)"
        CURRENT[monitoring-test-cluster1<br/>- Helm 차트<br/>- K8s 매니페스트<br/>- 소스코드<br/>- 스크립트]
    end
    
    subgraph "권장 구조 (분리된 저장소)"
        INFRA[infrastructure-charts<br/>- 인프라 Helm 차트<br/>- Prometheus, Grafana<br/>- Ingress, Storage]
        
        APP[application-charts<br/>- 애플리케이션 Helm 차트<br/>- 마이크로서비스<br/>- AI 서비스]
        
        GITOPS[gitops-manifests<br/>- 환경별 배포 매니페스트<br/>- ArgoCD Applications<br/>- 환경별 values]
        
        SOURCE[source-repositories<br/>- 애플리케이션 소스코드<br/>- Dockerfile<br/>- CI 파이프라인]
    end
    
    CURRENT -.->|분리| INFRA
    CURRENT -.->|분리| APP
    CURRENT -.->|분리| GITOPS
    CURRENT -.->|분리| SOURCE
```


---

*Originally published in [Notion](https://www.notion.so/CI-CD-Flow-241eef64a1ca801b9314e0d12d508237) on July 31, 2025*