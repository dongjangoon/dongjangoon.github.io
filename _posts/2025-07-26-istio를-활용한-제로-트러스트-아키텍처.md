---
layout: single
title: "Istio를 활용한 제로 트러스트 아키텍처"
date: 2025-07-26 04:42:00 +0000
categories: kubernetes
tags: [istio, service-mesh, zero-trust, security, kubernetes]
excerpt: "Istio 서비스 메시를 활용한 제로 트러스트 아키텍처 구현과 mTLS를 통한 클러스터 내부 보안 강화 방안을 다룹니다."
notion_id: 23ceef64-a1ca-8054-8546-cc80f8541a6b
notion_url: https://www.notion.so/Istio-23ceef64a1ca80548546cc80f8541a6b
---

# Istio를 활용한 제로 트러스트 아키텍처

이 글은 [https://www.youtube.com/watch?v=4sJd6PIkP_s](https://www.youtube.com/watch?v=4sJd6PIkP_s) 해당 링크의 영상 및 자료의 내용을 바탕으로 재구성된 글임을 밝힙니다.


<!--more-->

> Zero Trust - Never Trust, Always Verify

# Nginx Ingress Controller와 Istio의 차이는 뭘까?

회사에서 쿠버네티스 클러스터를 구성할 때, 클러스터 앞단에 구성되는 LB의 구성을 고민하다가 Nginx Ingress Controller를 앞단에 두기로 했다. 그 앞단에 있는 HA Proxy가 로드 밸런서의 기능을 하지만, HA Proxy의 경우 L4 로드 밸런서의 기능을 하는 대신, Nginx Ingress Controller는 **L7 로드 밸런서로서 Ingress로 정의된 다양한 백엔드 파트로 요청을 라우팅**하는 **어플리케이션 레벨에서의 로드밸런싱**이 가능하다. 또한 **경로 기반 라우팅**이 가능하다.

Nginx Ingress Controller는 외부에서 내부로 들어오는 트래픽을 처리하고 **SSL/TLS Termination**을 처리하는 등 보안에서의 역할도 겸한다. 

HTTPS → 종료, Nginx IC → HTTP → 클러스터 (평문)

이렇게 Nginx Ingress Controller를 구성하고, 다른 분의 발의로 Istio의 구성 역시 고민하게 되었다. 여기서 둘의 차이가 뭐냐는 질문을 받았다.

나 역시 개인 프로젝트에서 Istio를 사용하고 있긴 하지만, 서비스 메시, 서비스 간 통신… 등 istio의 역할에 대해 어렴풋한 이미지만 존재할 뿐 구체적으로 **왜?** 사용하는지에 대한 명확한 이유가 없었다.

## Istio

그럼 Nginx Ingress Controller와 달리 Istio는 어떤 역할을 할까? Gemini는 아래와 같이 Istio의 역할을 정의하고 있다.

- **역할: **Istio는 클러스터 내부의 서비스 간 통신을 관리하는 **서비스 메시**이다. 서비스 간의 모든 트래픽을 제어, 보안, 관찰하는 것이 주요 목적이다.
- 주요 기능
- 작동 방식
- 파드(어플리케이션 컨테이너 + Envoy)
> 즉, **Nginx Ingress Controller**는 외부에서 내부로 들어오는 클러스터의 “**출입문**” 역할을 하는 것이고, **Istio**는 “**내부 교통 관리 시스템**” 정도에 해당한다고 볼 수 있다.

# SSL Termination과 mTLS를 같이 쓰자

SSL/Termination, mTLS를 굳이 같이 써야하나라고 처음에 생각했지만, 둘은 같이 사용할 때 더 강력한 보안을 제공하고, 내부에서 mTLS를 사용해야만 완벽한 제로 트러스트를 갖출 수 있습니다.

우선 SSL/TLS Termination, mTLS과 동작하는 과정을 살펴보겠습니다.

## SSL/TLS Termination

Nginx Ingress Controller 기준, SSL/TLS Termination가 이뤄지는 절차는 다음과 같습니다. 

1. 클라이언트가 HTTPS로 요청을 보내고, Nginx Ingress Controller가 이 요청을 받아 TLS 암호화를 해제합니다.
1. 이 복호화된 일반 HTTP 트래픽을 내부의 백엔드 서비스로 전달합니다.
1. 이때, Nginx Ingress Controller와 백엔드 서비스 사이의 통신은 기본적으로 평문(plaintext)입니다.
## mTLS(Mutual TLS)

Istio의 mTLS는 클러스터 내부의 서비스 간 통신을 담당합니다.

1. Nginx Ingress Controller가 요청을 백엔드로 보내려고 할 때, Istio가 주입한 Envoy가 그 트래픽을 가로챕니다.
1. 이때, Istio의 mTLS가 STRICT 모드로 설정되어 있으면, Envoy 프록시 간의 통신은 자동으로 Mutual Authentication과 암호화가 적용됩니다.
1. 즉, Nginx Ingress Controller가 보낸 평문 트래픽을 백엔드의 Envoy가 받아서 다시 암호화를 시키고 검증합니다.
저는 처음에 왜 외부에서 이미 암호화된 통신을 굳이 또 내부에서 암호화를 해야 하나? 라고 생각했었습니다만, 몇 가지 케이스를 통해 내부에서도 mTLS 통신을 갖춰야 하는 이유를 찾을 수 있습니다.

## mTLS가 필요한 이유

1. 내부 공격 위험: 클러스터 내부의 한 서비스가 악성 코드를 포함하거나, 공격자가 이미 내부 네트워크에 침투했을 가능성이 있습니다.
1. 경계의 취약성: SSL Termination이 이뤄지는 Nginx Ingress Controller는 외부 공격의 주요 표적이 됩니다. 만약, 이 Nginx Ingress Controller가 해킹당한다면, 내부의 평문 통신에서 모든 민감 정보들이 노출될 수 있습니다.
1. 서비스 간 인증: HTTPS는 클라이언트가 서버의 신원을 확인하는 단방향 인증입니다. 하지만, MSA 환경에서는 서비스 A가 B를 호출할 때, B도 서비스 A가 진짜 정당한 서비스인지 확인해야 합니다. mTLS는 상호 인증(mutual authentication)을 통해, 정해진 권한대로만 통신할 수 있게 합니다. → AutorizationPolicy
이를 통해 **“매번 검증하라”**라는 제로 트러스트 아키텍처를 구현할 수 있습니다.

Gateway, VirtualService → 라우팅하고, 특정 서비스에서 오는 요청 받게 하기

# Zero Trust Architecture

이 Istio의 mTLS 역시 제로 트러스트 아키텍처의 구성 요소 중 하나입니다만, 제로 트러스트의 일부분에 불과합니다.

제로 트러스트 아키텍처는 NIST(미국 국립표준기술원), Gartner(가트너) 등 공신력 있는 기관들과 여러 클라우드 벤더(구글, MS)가 제시하는 보안의 핵심 원칙과 권고사항입니다. ([https://www.nist.gov/publications/zero-trust-architecture](https://www.nist.gov/publications/zero-trust-architecture))

아래는 제로 트러스트 아키텍처를 구현하기 위한 필수적인 요소들입니다.

### 1. 신원 및 접근 관리 (Identity and Access Management, IAM)

요청에 대해 “누구”인지 확인하는 절차는 매우 중요하고 기본이 되는 요소입니다.

- **다중 인증 (Multi-Factor Authentication, MFA)**: 사용자 이름, 비밀번호 외에 추가적인 인증 수단을 요구합니다. (OTP, 생체 인식 등)
- **최소 권한의 원칙 (Principle of Least Privilege, PoLP)**: 사용자나 시스템에 필요한 최소 권한만을 부여합니다. 이를 통해 공격자가 시스템에 침투하더라도 피해를 최소화할 수 있습니다.
- **중앙 집중식 접근 제어**: 모든 리소스에 대한 접근 권한을 중앙에서 관리하고 통제합니다. 사용자의 역할, 디바이스 상태, 접근 시간, 위치 등을 고려하여 동적으로 접근을 허용, 거부해야 합니다.
### 2. Microsegmentation

네트워크를 작은 단위로 세분화하여 워크로드(서비스, 컨테이너 등)간의 통신을 제어하는 기술입니다.** Istio의 mTLS**가 바로 이 마이크로세그멘테이션의 핵심 기술이라고 할 수 있습니다.

- **횡적 이동 (Lateral Movement) 방지**: 네트워크 내부에서 한 워크로드나 서버가 침해당해도, 다른 워크로드로 이동하는 것을 막습니다.
- **개별 워크로드 단위의 정책**: 네트워크를 워크로드 단위로 나누어 다른 보안 정책을 적용해야 합니다. 예를 들어, 웹 서버는 백엔드와 통신하지만, DB와는 통신할 수 없게 하는 것과 같습니다.
### 3. 지속적인 모니터링 및 분석

제로 트러스트는 "한 번 검증하면 끝"이 아닙니다. 모든 활동을 지속적으로 감시하고 분석해야 합니다.

- **실시간 위협 탐지 및 대응:** 모든 네트워크 트래픽, 사용자 활동, 시스템 로그를 실시간으로 모니터링하여 비정상적인 패턴이나 위협을 탐지합니다.
- **행동 분석 (Behavioral Analytics):** 사용자의 평소 행동 패턴을 학습하여, 평소와 다른 행동(비정상적인 시간에 접속, 평소 사용하지 않던 리소스에 접근 등)을 감지하고 경고를 보냅니다.
- **로깅 및 감사 (Logging and Auditing):** 모든 접근 및 활동 기록을 남겨 추후 사고 발생 시 원인을 분석하고 감사할 수 있도록 합니다.
### 4. 디바이스 보안 및 관리 (Device Security and Management)

사용자뿐만 아니라, 사용자가 사용하는 디바이스(노트북, 스마트폰 등)도 검증 대상입니다.

- **디바이스 상태 확인:** 접근을 허용하기 전에 디바이스가 최신 보안 패치를 적용했는지, 안티바이러스가 활성화되어 있는지, 비정상적인 소프트웨어가 설치되어 있지는 않은지 등을 확인합니다.
- **모바일 디바이스 관리 (MDM):** 스마트폰이나 태블릿 등 모바일 기기의 보안 정책을 관리하고, 분실 시 원격으로 데이터를 삭제하는 등의 기능을 제공합니다.
### 5. 데이터 보호 (Data Protection)

데이터는 제로 트러스트 아키텍처의 최종 보호 대상입니다.

- **데이터 분류 및 암호화:** 데이터의 중요도에 따라 분류하고, 민감한 데이터는 암호화하여 저장 및 전송합니다.
- **데이터 손실 방지 (Data Loss Prevention, DLP):** 민감한 데이터가 외부로 유출되지 않도록 모니터링하고 제어합니다.
# Istio를 활용한 mTLS 구현

- mTLS 구현하기 → HTTPS 적용

---

*Originally published in [Notion](https://www.notion.so/Istio-23ceef64a1ca80548546cc80f8541a6b) on July 26, 2025*